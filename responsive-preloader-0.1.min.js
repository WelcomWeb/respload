/**
* ResponseivePreloader 0.1
*
* Load only images visible for the active media query
*
* @author Björn Wikström <bjorn@welcom.se>
* @license LGPL v3 <http://www.gnu.org/licenses/lgpl.html>
* @version 0.1
* @copyright Welcom Web i Göteborg AB 2013
*/
;(function(e,t,n){if(typeof e.ResponsivePreloader!==typeof n){return}NodeList.prototype.each=function(e){for(var t=0;t<this.length;t++){e.call(this[t])}};var r=function(){var n=function(t){return e.getComputedStyle?e.getComputedStyle(t):t.currentStyle};var r=function(e){var t=e.offsetWidth,r=e.offsetHeight,i=e.tagName.toLowerCase()==="tr",s=n(e);return t===0&&r===0&&!i?true:t!==0&&r!==0&&!i?false:s.display==="none"||s.visibility==="hidden"};var i=function(){if(this.getAttribute("data-rprl-width")){this.removeAttribute("data-rprl-width");this.removeAttribute("width")}var e=this.getAttribute("data-responsive-preload");this.setAttribute("src",e)};var s=function(){if(!this.getAttribute("width")){this.setAttribute("width","1");this.setAttribute("data-rprl-width","1")}if(this.getAttribute("src")==""&&!r(this)){i.call(this);t.querySelectorAll('[data-responsive-preload-dep="'+this.getAttribute("id")+'"]').each(i)}};var o=function(){t.querySelectorAll("[data-responsive-preload]").each(s)};var u=function(e,n){var r=t.getElementsByTagName("head")[0];var i=t.createElement("script");i.type="text/javascript";i.src=e;i.onload=function(){t.querySelectorAll=Sizzle;n()};r.appendChild(i)};var a=function(){t.getElementsByTagName("img").each(function(){if(this.getAttribute("data-responsive-preload")){i.call(this)}})};return{init:function(n){if(!t.querySelectorAll&&n&&n.sizzle){u(n.sizzle,o)}else if(t.querySelectorAll){o()}else{a()}if(n&&n.resizable){e.onresize=function(){o()}}}}}();e.ResponsivePreloader=r})(window,window.document)